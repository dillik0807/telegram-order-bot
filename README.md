# Telegram Order Bot ‚Üí WhatsApp

Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –∑–∞—è–≤–æ–∫ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ WhatsApp.

## üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ë–î

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `SQLITE_CANTOPEN`, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
npm run check-db      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø –ë–î
npm run use-postgres  # –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ PostgreSQL
npm install           # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm start             # –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [FIX-DATABASE-ERROR.md](./FIX-DATABASE-ERROR.md)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd telegram-order-bot
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:

```bash
copy .env.example .env
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram Bot Token

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º (–∏–º—è –±–æ—Ç–∞, username)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WhatsApp (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)

#### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 1: Meta WhatsApp Cloud API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Meta for Developers](https://developers.facebook.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WhatsApp Business
3. –ü–æ–ª—É—á–∏—Ç–µ `Phone Number ID` –∏ `Access Token`
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
WHATSAPP_PHONE_ID=your_phone_id
WHATSAPP_ACCESS_TOKEN=your_access_token
WHATSAPP_RECIPIENT=+992900000000
```

#### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 2: Twilio

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Twilio](https://www.twilio.com/)
2. –ü–æ–ª—É—á–∏—Ç–µ WhatsApp Sandbox –∏–ª–∏ Business –Ω–æ–º–µ—Ä
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886
TWILIO_WHATSAPP_TO=whatsapp:+992900000000
```

#### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 3: Telegram –≥—Ä—É–ø–ø–∞ (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –¥–ª—è —Å—Ç–∞—Ä—Ç–∞)

1. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram
2. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. –ü–æ–ª—É—á–∏—Ç–µ ID –≥—Ä—É–ø–ø—ã (–æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [@userinfobot](https://t.me/userinfobot))
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
TELEGRAM_GROUP_ID=-1001234567890
```

### 5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
npm start
```

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π:

```bash
npm run dev
```

## üìã –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç

1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start`
2. –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç:
   - –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
   - –¢–µ–ª–µ—Ñ–æ–Ω
   - –°–∫–ª–∞–¥ (–∏–∑ —Å–ø–∏—Å–∫–∞)
   - –¢–æ–≤–∞—Ä—ã (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
   - –ù–æ–º–µ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞—è–≤–∫—É
4. –ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (SQLite)
5. –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ WhatsApp –∏–ª–∏ Telegram –≥—Ä—É–ø–ø—É

## üì¶ –ü—Ä–∏–º–µ—Ä –∑–∞—è–≤–∫–∏

```
üì¶ –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê

üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +992900000000
üè¨ –°–∫–ª–∞–¥: –°–∫–ª–∞–¥ ‚Ññ1

üõí –¢–æ–≤–∞—Ä—ã:
1) –¶–µ–º–µ–Ω—Ç ‚Äî 10 —à—Ç
2) –ü–µ—Å–æ–∫ ‚Äî 5 —Ç

üöö –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: 1234 AB
üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –°—Ä–æ—á–Ω–æ

‚è∞ –í—Ä–µ–º—è: 16.01.2026, 15:30:00
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite —Å —Ç—Ä–µ–º—è —Ç–∞–±–ª–∏—Ü–∞–º–∏:

- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `orders` - –∑–∞—è–≤–∫–∏
- `order_items` - —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞—è–≤–∫–∞—Ö

–ë–∞–∑–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É
- `/cancel` - –æ—Ç–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –∑–∞—è–≤–∫—É

## üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Å–µ–±—è

### –ò–∑–º–µ–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤

–í —Ñ–∞–π–ª–µ `bot.js` –Ω–∞–π–¥–∏—Ç–µ:

```javascript
const warehouses = ['–°–∫–ª–∞–¥ ‚Ññ1', '–°–∫–ª–∞–¥ ‚Ññ2', '–°–∫–ª–∞–¥ ‚Ññ3', '–î—Ä—É–≥–æ–π'];
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤

```javascript
const products = [
  '–¶–µ–º–µ–Ω—Ç',
  '–ü–µ—Å–æ–∫',
  '–©–µ–±–µ–Ω—å',
  '–ö–∏—Ä–ø–∏—á',
  '–ê—Ä–º–∞—Ç—É—Ä–∞',
  '–î—Ä—É–≥–æ–µ'
];
```

## üîß Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (`npm start`)

### WhatsApp –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –≤ `.env`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç —Å Telegram –≥—Ä—É–ø–ø–æ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- –£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª `orders.db` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PM2 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤–º–µ—Å—Ç–æ polling

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–æ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∑–∞—è–≤–∫–∞–º
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å CRM

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã - —Å–æ–∑–¥–∞–π—Ç–µ issue –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º.
