# ‚ö° Railway - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

–û—à–∏–±–∫–∏ `column does not exist` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ù—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î.

---

## üöÄ –î–µ–ø–ª–æ–π –∑–∞ 3 –∫–æ–º–∞–Ω–¥—ã

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Railway
railway link

# 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –ë–î (–í–ê–ñ–ù–û!)
railway run npm run migrate-postgres

# 3. –î–µ–ø–ª–æ–π
railway up
```

**–ì–æ—Ç–æ–≤–æ!** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `railway logs`

---

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—è?

–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ PostgreSQL:

‚úÖ `is_deleted` - –¥–ª—è –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞—è–≤–æ–∫  
‚úÖ `deleted_at` - –¥–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è  
‚úÖ `deleted_by` - –∫—Ç–æ —É–¥–∞–ª–∏–ª  
‚úÖ `client_id` - —Å–≤—è–∑—å —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏  
‚úÖ `whatsapp_group_id` - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–∫–ª–∞–¥–æ–≤

---

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –ª–æ–≥–∞—Ö:

```
üîÑ –ú–ò–ì–†–ê–¶–ò–Ø POSTGRESQL
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ!
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞: is_deleted
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞: client_id
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: 15
‚úÖ –ß–ë–∞–ª—Ö–∏ ‚Üí –ë–∞—Ö–æ—Ä –æ–π–ª —Å–∫–ª–∞–¥
‚úÖ –ó–∞–≤–æ–¥–¢–ß ‚Üí —Ç–æ—á–∏–∫ –∞–∑–æ–¥
üéâ –ú–ò–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û!
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:

```
‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω
‚úÖ –¢–∞–±–ª–∏—Ü—ã PostgreSQL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
üîß –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å—Ç—Ä–æ–µ–Ω—ã
ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ!
```

**–ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ –ø—Ä–æ `column does not exist`!**

---

## üÜò –ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Railway Shell

```bash
railway shell
npm run migrate-postgres
exit
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è SQL

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
ALTER TABLE orders ADD COLUMN IF NOT EXISTS is_deleted INTEGER DEFAULT 0;
ALTER TABLE orders ADD COLUMN IF NOT EXISTS deleted_at TIMESTAMP;
ALTER TABLE orders ADD COLUMN IF NOT EXISTS deleted_by TEXT;
ALTER TABLE orders ADD COLUMN IF NOT EXISTS client_id INTEGER;

UPDATE orders o
SET client_id = (
    SELECT c.id FROM users u 
    JOIN clients c ON u.telegram_id = c.telegram_id 
    WHERE u.id = o.user_id
)
WHERE client_id IS NULL;

ALTER TABLE warehouses ADD COLUMN IF NOT EXISTS whatsapp_group_id TEXT;

UPDATE warehouses SET whatsapp_group_id = '120363419535622239@g.us' WHERE name = '–ß–ë–∞–ª—Ö–∏';
UPDATE warehouses SET whatsapp_group_id = '120363422710745455@g.us' WHERE name = '–ó–∞–≤–æ–¥–¢–ß';
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
railway logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
railway restart

# –°—Ç–∞—Ç—É—Å
railway status
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫.

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [–ú–ò–ì–†–ê–¶–ò–Ø-–ë–î.md](./–ú–ò–ì–†–ê–¶–ò–Ø-–ë–î.md)

---

**–î–∞—Ç–∞:** 8 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
